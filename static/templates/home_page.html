{% extends "base.html" %}
{% load staticfiles %}
{% load url_tags %}

{% block pagetitle %}Home{% endblock %}

{% block slider %}

  {% if sliders %}
  <div id="slider-container">
	<div class="container">
	  <div id="carousel-example-generic" class="carousel slide" data-ride="carousel">
		<!-- Indicators -->
		<ol class="carousel-indicators">
		  {% for slider in sliders %}
			{% if forloop.first %}
			  <li data-target="#carousel-example-generic" data-slide-to="{{ forloop.counter0 }}" class="active"></li>
			{% else %}
			  <li data-target="#carousel-example-generic" data-slide-to="{{ forloop.counter0 }}"></li>
			{% endif %}
		  {% endfor %}
		</ol>
		<!-- Wrapper for slides -->
		  <div class="carousel-inner">
			{% for slider in sliders %}
			  {% if forloop.first %}
			  <div class="item active">
			  {% else %}
			  <div class="item">
			  {% endif %}
				<img src="{{ slider.banner.url }}" class="img-responsive" />
				{% if slider.caption %}
				  <div class="carousel-caption">
					<h3>{{ slider.caption|safe }}</h3>
				  </div>
				{% endif %}
			  </div>
			{% endfor %}
		  </div>
		{% if sliders|length > 1 %}
		<!-- Controls -->
		<a class="left carousel-control" href="#carousel-example-generic" role="button" data-slide="prev">
		  <span class="glyphicon glyphicon-chevron-left"></span>
		</a>
		<a class="right carousel-control" href="#carousel-example-generic" role="button" data-slide="next">
		  <span class="glyphicon glyphicon-chevron-right"></span>
		</a>
		{% endif %}
	  </div> <!-- Carousel -->
	</div> <!-- /container -->
  </div><!-- slider/container -->
  {% endif %}

{% endblock %}

{% block content %}

  <div id="content">
	<div class="container">
		<hr />
		<!-- Recently added vehicles -->
		{% if top_vehicles %}
		<div class="row">
			<div class="col-md-12">
				<h2><i class="fa fa-align-justify"></i> Recently Added!</h2>
			</div>
		</div> <!-- /row -->
		<div class="row">
		  {% for vehicle in top_vehicles %}
		  {% with vehicle.images.get_main_image.thumbnail as thumb %}
			<div class="col-sm-3">
				<a href="{% url 'vehicle' vehicle.category.slug vehicle.pk vehicle.slug %}" class="thumbnail">
					{% if thumb %}
					<img class="img-responsive" src="{{ thumb.url }}" alt="{{ vehicle }}" title="{{ vehicle }}" />
					{% else %}
					<img class="img-responsive" src="{% static 'img/thumbnail.jpg' %}" alt="{{ vehicle }}" title="{{ vehicle }}" />
					{% endif %}
				</a> <!-- /img -->
				<div class="row">
					<div class="col-sm-12">
						<a href="{% url 'category' vehicle.category.slug %}" class="label label-primary">
		                    <i class="fa fa-tag"></i> {{ vehicle.category.category_name }}</a>
		                <a href="{% url 'category' vehicle.category.slug %}{% add_to_query_string request make=vehicle.make.slug %}" class="label label-warning">
		                    <i class="fa fa-tag"></i> {{ vehicle.make.v_make }}
		                </a>
		            </div>
                </div>
				<h3>{{ vehicle }}</h3>
			</div> <!-- /grid-3 -->
		{% if forloop.counter|divisibleby:"4" and not forloop.last %}
		</div>
		<div class="row">
		{% endif %}
		  {% endwith %}
		  {% endfor %}
		</div> <!-- /row -->
		{% endif %}
	</div> <!-- /container -->
  </div><!-- /content -->
{% endblock %}